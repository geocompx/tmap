```{r map-projections-1}
#| echo: false
source("code/before_script.R")
```

# Map projections {#map-projections}

<!-- https://r-tmap.github.io/tmap/articles/foundations_crs -->
<!-- maybe also include map_boundary stuff here -->

<!-- global: -->

```{r map-projections-2}
#| message: false
library(tmap)
library(sf)
library(stars)
worldelevation = read_stars("data/worldelevation.tif")
worldvector = read_sf("data/worldvector.gpkg")
worldcities = read_sf("data/worldcities.gpkg")
```

```{r map-projections-3}
tm = tm_shape(worldvector) +
  tm_polygons() +
  tm_shape(worldcities) +
  tm_dots() +
  tm_text("name") +
  tm_crs("EPSG:4326")
tm
```
 
```{r map-projections-4}
tm + 
  tm_crs("auto")
```

```{r map-projections-5}
tm +
  tm_crs("+proj=eck4") +
  tm_layout(bg.color = "lightblue",
            earth_boundary = TRUE)
```

<!-- tm + tm_style("natural") -->

```{r}
#| message: false
#| echo: false
#| fig-asp: 1
world_projs_code = c("boggs", "eck1", "eck4", "eqearth", "goode", 
                     #"hatano", 
                     "moll", "nell", "robin", "times", "wag1", "wintri",
                     "vandg4")
world_projs_names = c("Boggs", "Eckert I", "Eckert IV", "Equal Earth", 
                      "Goode Homolosine",
                      #"Hatano",
                      "Mollweide", "Nell-Hammer",
                      "Robinson", "Times", "Wagner I", "Winkel Tripel", 
                      "Van der Grinten IV")
world_projs = cbind(world_projs_code, world_projs_names)

# create a tmap for each of them
tms = lapply(1:nrow(world_projs), function(p) {
  tm_shape(worldvector) +
    tm_polygons() +
    tm_crs(paste0("+proj=", world_projs[p, 1])) +
    tm_layout(panel.labels = world_projs[p, 2]) +
    tm_layout(bg.color = "lightblue",
            earth_boundary = TRUE)
  # tm_shape(World, crs = paste0("+proj=", p)) + tm_polygons() + tm_style("natural") + tm_layout(panel.labels = p)
})
tmap_arrange(tms, ncol= 3)
```

<!-- https://proj.org/en/stable/operations/projections/index.html -->

<!-- maybe bbox could be a part of tm_crs? -->

```{r map-projections-7}
tm_shape(worldvector, bbox = "FULL") +
  tm_polygons() +
  tm_graticules() +
  tm_crs("+proj=ortho +lat_0=30 +lon_0=0")+
  tm_layout(earth_boundary = TRUE, frame = FALSE)
```

<!-- local? -->
<!-- properies -->

<!-- specific: south pole? -->
